{"version":3,"sources":["webpack:///./src/components/Pagination.vue","webpack:///./src/components/Pagination.vue?f819","webpack:///./src/views/admin/Orders.vue","webpack:///./src/views/admin/Orders.vue?1e9b"],"names":["aria-label","class","aria-hidden","pages","has_pre","href","updatePage","current_page","total_pages","page","key","has_next","props","methods","console","log","this","$emit","render","active","isLoading","orders","item","length","is_paid","$filters","date","create_at","user","email","products","product","i","title","qty","unit","currency","total","type","id","updatePaid","for","openDelOrderModal","tempOrder","ref","delOrder","pagination","getOrders","data","isNew","currentPage","components","Pagination","DelModal","api","$http","get","tempProduct","then","response","openModal","orderComponent","$refs","orderModal","showModal","delComponent","delModal","paid","put","$httpMessageState","delete","hideModal","created"],"mappings":"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","file":"js/chunk-7e6d7aa0.70e977ea.js","sourcesContent":["<template>\n  <nav aria-label=\"Page navigation example\">\n    <ul class=\"pagination justify-content-center\">\n      <li class=\"page-item\" :class=\"{'disabled': !pages.has_pre}\">\n        <a class=\"page-link\" href=\"#\" aria-label=\"Previous\"\n        @click.prevent=\"updatePage(pages.current_page-1)\">\n          <span aria-hidden=\"true\">&laquo;</span>\n        </a>\n      </li>\n      <li class=\"page-item\" v-for=\"page in pages.total_pages\" :key=\"page\"\n      :class=\"{'active': page===pages.current_page}\">\n        <a class=\"page-link\" href=\"#\" @click.prevent=\"updatePage(page)\">{{ page }}</a>\n      </li>\n      <li class=\"page-item\" :class=\"{'disabled': !pages.has_next}\">\n        <a class=\"page-link\" href=\"#\" aria-label=\"Next\"\n        @click.prevent=\"updatePage(pages.current_page+1)\">\n          <span aria-hidden=\"true\">&raquo;</span>\n        </a>\n      </li>\n    </ul>\n  </nav>\n</template>\n\n<script>\n// :pages=\"{ 頁碼資訊 }\"\n// @emitPages=\"更新頁面事件\"\nexport default {\n  props: ['pages'],\n  methods: {\n    updatePage(page) {\n      console.log(page);\n      this.$emit('emit-pages', page);\n    },\n  },\n};\n</script>\n","import { render } from \"./Pagination.vue?vue&type=template&id=07c923b5\"\nimport script from \"./Pagination.vue?vue&type=script&lang=js\"\nexport * from \"./Pagination.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<template>\n  <Loading :active=\"isLoading\"></Loading>\n  <table class=\"table mt-4\">\n    <thead>\n    <tr>\n      <th>購買時間</th>\n      <th>Email</th>\n      <th>購買款項</th>\n      <th>應付金額</th>\n      <th>是否付款</th>\n      <th>編輯</th>\n    </tr>\n    </thead>\n    <tbody>\n      <template v-for=\"(item, key) in orders\" :key=\"key\">\n        <tr v-if=\"orders.length\"\n            :class=\"{'text-secondary': !item.is_paid}\">\n          <td>{{ $filters.date(item.create_at) }}</td>\n          <td><span v-text=\"item.user.email\" v-if=\"item.user\"></span></td>\n          <td>\n            <ul class=\"list-unstyled\">\n              <li v-for=\"(product, i) in item.products\" :key=\"i\">\n                {{ product.product.title }} 數量：{{ product.qty }}\n                {{ product.product.unit }}\n              </li>\n            </ul>\n          </td>\n          <td class=\"text-right\">NT$ {{$filters.currency(item.total) }}</td>\n          <td>\n            <div class=\"form-check form-switch\">\n              <input class=\"form-check-input\" type=\"checkbox\" :id=\"`paidSwitch${item.id}`\"\n                     v-model=\"item.is_paid\"\n                     @change=\"updatePaid(item)\">\n              <label class=\"form-check-label\" :for=\"`paidSwitch${item.id}`\">\n                <span v-if=\"item.is_paid\">已付款</span>\n                <span v-else>未付款</span>\n              </label>\n            </div>\n          </td>\n          <td>\n            <div class=\"btn-group\">\n              <button class=\"btn btn-outline-danger btn-sm\"\n                      @click=\"openDelOrderModal(item)\"\n              >刪除</button>\n            </div>\n          </td>\n        </tr>\n      </template>\n    </tbody>\n  </table>\n  <DelModal :item=\"tempOrder\" ref=\"delModal\" @del-item=\"delOrder\"></DelModal>\n  <Pagination :pages=\"pagination\" @emit-pages=\"getOrders\"></Pagination>\n</template>\n\n<script>\nimport DelModal from '@/components/DelModal.vue';\nimport Pagination from '@/components/Pagination.vue';\n\nexport default {\n  data() {\n    return {\n      orders: {},\n      isNew: false,\n      pagination: {},\n      isLoading: false,\n      tempOrder: {},\n      currentPage: 1,\n    };\n  },\n  components: {\n    Pagination,\n    DelModal,\n  },\n  methods: {\n    getOrders(currentPage = 1) {\n      this.currentPage = currentPage;\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/orders?page=${currentPage}`;\n      this.isLoading = true;\n      this.$http.get(api, this.tempProduct).then((response) => {\n        this.orders = response.data.orders;\n        this.pagination = response.data.pagination;\n        this.isLoading = false;\n        console.log(response);\n      });\n    },\n    openModal(isNew, item) {\n      this.tempOrder = { ...item };\n      this.isNew = false;\n      const orderComponent = this.$refs.orderModal;\n      orderComponent.showModal();\n    },\n    openDelOrderModal(item) {\n      this.tempOrder = { ...item };\n      const delComponent = this.$refs.delModal;\n      delComponent.showModal();\n    },\n    updatePaid(item) {\n      this.isLoading = true;\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/order/${item.id}`;\n      const paid = {\n        is_paid: item.is_paid,\n      };\n      this.$http.put(api, { data: paid }).then((response) => {\n        this.isLoading = false;\n        this.getOrders(this.currentPage);\n        this.$httpMessageState(response, '更新付款狀態');\n      });\n    },\n    delOrder() {\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/order/${this.tempOrder.id}`;\n      this.isLoading = true;\n      this.$http.delete(api).then((response) => {\n        console.log(response);\n        const delComponent = this.$refs.delModal;\n        delComponent.hideModal();\n        this.getOrders(this.currentPage);\n      });\n    },\n  },\n  created() {\n    this.getOrders();\n    console.log(process.env.VUE_APP_API);\n  },\n};\n</script>\n","import { render } from \"./Orders.vue?vue&type=template&id=bdcb5f1e\"\nimport script from \"./Orders.vue?vue&type=script&lang=js\"\nexport * from \"./Orders.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}