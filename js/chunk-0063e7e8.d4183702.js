(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0063e7e8"],{"1dde":function(t,e,c){var r=c("d039"),n=c("b622"),o=c("2d00"),i=n("species");t.exports=function(t){return o>=51||!r((function(){var e=[],c=e.constructor={};return c[i]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"466d":function(t,e,c){"use strict";var r=c("d784"),n=c("825a"),o=c("50c4"),i=c("577e"),a=c("1d80"),s=c("8aa5"),u=c("14c3");r("match",(function(t,e,c){return[function(e){var c=a(this),r=void 0==e?void 0:e[t];return void 0!==r?r.call(e,c):new RegExp(e)[t](i(c))},function(t){var r=n(this),a=i(t),l=c(e,r,a);if(l.done)return l.value;if(!r.global)return u(r,a);var d=r.unicode;r.lastIndex=0;var b,h=[],p=0;while(null!==(b=u(r,a))){var f=i(b[0]);h[p]=f,""===f&&(r.lastIndex=s(a,o(r.lastIndex),d)),p++}return 0===p?null:h}]}))},"4de4":function(t,e,c){"use strict";var r=c("23e7"),n=c("b727").filter,o=c("1dde"),i=o("filter");r({target:"Array",proto:!0,forced:!i},{filter:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})},"7bda":function(t,e,c){"use strict";c.r(e);var r=c("7a23"),n={class:"container my-5"},o={class:"row"},i={class:"input-group mb-4"},a=Object(r["h"])("button",{class:"btn btn-outline-secondary",type:"button",id:"button-addon2"},"搜尋",-1),s={class:"col-md-2 me-auto mb-5"},u={class:"list-group text-center sticky-top",style:{top:"40px"}},l=["onClick"],d={class:"col-md-10"},b={class:"row row-cols-2 row-cols-md-4 g-4 mb-2"},h={class:"card h-100 border-0 box-shadow"},p=["onClick"],f={key:0,class:"badge bg-danger position-absolute top-0 end-0 p-2 zindex-fixed h6 align-items-center"},g=Object(r["h"])("i",{class:"bi bi-alarm"},null,-1),j=Object(r["h"])("strong",{class:"h6"},"限時特賣",-1),O=[g,j],v=["onClick"],y={class:"card-title h6 webkit-line-clamp"},m=Object(r["h"])("p",{class:"card-text"},null,-1),k={class:"d-flex justify-content-between align-items-baseline"},x={class:"text-danger"},w={key:0,class:"h6"},A={key:1,class:"h6"},C=Object(r["j"])("優惠價 "),I={class:"h6 text-danger"},P=Object(r["j"])(" 元 "),$={class:"card-footer border-top-0 bg-white d-flex mb-2 mx-2"},K=["onClick","disabled"],L={key:0,class:"spinner-border spinner-border-sm",role:"status"},V=Object(r["j"])(" 加到購物車 "),E=Object(r["h"])("div",{class:"mt-5"},null,-1);function _(t,e,c,g,j,_){var S=this,U=Object(r["H"])("Loading");return Object(r["A"])(),Object(r["g"])(r["a"],null,[Object(r["k"])(U,{active:j.isLoading},null,8,["active"]),Object(r["h"])("div",null,[Object(r["h"])("div",n,[Object(r["h"])("div",o,[Object(r["h"])("div",i,[Object(r["U"])(Object(r["h"])("input",{type:"text",class:"form-control",placeholder:"請輸入","aria-label":"請輸入","aria-describedby":"button-addon2","onUpdate:modelValue":e[0]||(e[0]=function(t){return S.serch=t})},null,512),[[r["P"],this.serch]]),a]),Object(r["h"])("div",s,[Object(r["h"])("div",u,[Object(r["h"])("button",{type:"button",class:Object(r["r"])(["list-group-item list-group-item-action border-0 py-4",{active:"All"===j.category}]),"aria-current":"true",onClick:e[1]||(e[1]=Object(r["V"])((function(t){return j.category="All"}),["prevent"]))}," 全部 ",2),(Object(r["A"])(!0),Object(r["g"])(r["a"],null,Object(r["F"])(_.filterCategory,(function(t,e){return Object(r["A"])(),Object(r["g"])("button",{type:"button",class:Object(r["r"])(["list-group-item list-group-item-action border-0 py-3",{active:j.category===t}]),key:e,onClick:Object(r["V"])((function(e){return j.category=t}),["prevent"])},Object(r["K"])(t),11,l)})),128))])]),Object(r["h"])("div",d,[Object(r["h"])("div",b,[(Object(r["A"])(!0),Object(r["g"])(r["a"],null,Object(r["F"])(_.filterProducts,(function(t){return Object(r["A"])(),Object(r["g"])("div",{class:"col",key:t.id},[Object(r["h"])("div",h,[Object(r["h"])("div",{style:Object(r["s"])([{height:"200px","background-size":"contain","background-position":"center","background-repeat":"no-repeat"},{backgroundImage:"url(".concat(t.imageUrl,")")}]),class:"w-100 position-relative",type:"button",onClick:Object(r["V"])((function(e){return _.getProduct(t.id)}),["prevent"])},null,12,p),t.is_onSale?(Object(r["A"])(),Object(r["g"])("span",f,O)):Object(r["f"])("",!0),Object(r["h"])("div",{class:"card-body",type:"button",onClick:Object(r["V"])((function(e){return _.getProduct(t.id)}),["prevent"])},[Object(r["h"])("h5",y,Object(r["K"])(t.title),1),m,Object(r["h"])("div",k,[Object(r["h"])("span",x,Object(r["K"])(parseInt(t.price/t.origin_price*100))+"折 ",1),t.price?Object(r["f"])("",!0):(Object(r["A"])(),Object(r["g"])("div",w,Object(r["K"])(t.origin_price)+" 元",1)),t.price?(Object(r["A"])(),Object(r["g"])("div",A,[Object(r["h"])("strong",null,[C,Object(r["h"])("span",I,Object(r["K"])(t.price),1),P])])):Object(r["f"])("",!0)])],8,v),Object(r["h"])("div",$,[Object(r["h"])("button",{type:"button",class:"btn btn-outline-danger btn-sm m-auto",onClick:function(e){return _.addCart(t.id)},disabled:S.status.loadingItem===t.id},[S.status.loadingItem===t.id?(Object(r["A"])(),Object(r["g"])("div",L)):Object(r["f"])("",!0),V],8,K)])])])})),128))]),E])])])])],64)}c("99af"),c("159b"),c("4de4"),c("ac1f"),c("466d");var S=c("cfb9"),U={data:function(){return{products:[],product:{},pagination:{},status:{loadingItem:""},isLoading:!1,category:"All",categoryItem:[],tempProducts:[],serch:""}},inject:["emitter"],methods:{getProducts:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("yiru0220","/products/all");this.isLoading=!0,this.$http.get(e).then((function(e){t.isLoading=!1,e.data.success&&(console.log(e),t.products=e.data.products)}))},getProduct:function(t){this.$router.push("/product/".concat(t))},addCart:function(t){var e=this,c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("yiru0220","/cart");this.status.loadingItem=t;var r={product_id:t,qty:1};this.$http.post(c,{data:r}).then((function(t){t.data.success&&(console.log(t),S["a"].emit("update-cart"),e.status.loadingItem="",e.$httpMessageState(t,"加入購物車"))}))}},computed:{filterCategory:function(){var t=this;return t.products.forEach((function(e){t.categoryItem.push(e.category)})),t.categoryItem.filter((function(t,e,c){var r=c.indexOf(t)===e;return r}))},filterProducts:function(){var t=this,e=[];return""===this.serch?(e="All"===this.category?this.products:this.products.filter((function(e){return e.category.match(t.category)})),e):(e=this.products.filter((function(e){return e.title.match(t.serch)})),e)}},created:function(){this.$route.params.category&&(this.category=this.$route.params.category),this.getProducts()}};U.render=_;e["default"]=U},8418:function(t,e,c){"use strict";var r=c("a04b"),n=c("9bf2"),o=c("5c6c");t.exports=function(t,e,c){var i=r(e);i in t?n.f(t,i,o(0,c)):t[i]=c}},"99af":function(t,e,c){"use strict";var r=c("23e7"),n=c("d039"),o=c("e8b5"),i=c("861d"),a=c("7b0b"),s=c("50c4"),u=c("8418"),l=c("65f0"),d=c("1dde"),b=c("b622"),h=c("2d00"),p=b("isConcatSpreadable"),f=9007199254740991,g="Maximum allowed index exceeded",j=h>=51||!n((function(){var t=[];return t[p]=!1,t.concat()[0]!==t})),O=d("concat"),v=function(t){if(!i(t))return!1;var e=t[p];return void 0!==e?!!e:o(t)},y=!j||!O;r({target:"Array",proto:!0,forced:y},{concat:function(t){var e,c,r,n,o,i=a(this),d=l(i,0),b=0;for(e=-1,r=arguments.length;e<r;e++)if(o=-1===e?i:arguments[e],v(o)){if(n=s(o.length),b+n>f)throw TypeError(g);for(c=0;c<n;c++,b++)c in o&&u(d,b,o[c])}else{if(b>=f)throw TypeError(g);u(d,b++,o)}return d.length=b,d}})}}]);
//# sourceMappingURL=chunk-0063e7e8.d4183702.js.map